<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹</title>
    <style>
        body {
            background: #0f172a;
            color: white;
            font-family: Arial;
            padding: 15px;
            text-align: center;
        }
        button {
            background: #7c3aed;
            color: white;
            border: none;
            padding: 15px;
            margin: 10px;
            width: 90%;
            border-radius: 10px;
            font-size: 18px;
        }
        .result {
            background: #1e293b;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: right;
            direction: ltr;
        }
    </style>
</head>
<body>
    <h1>ğŸ” Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹</h1>
    <button onclick="test1()">1. ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„</button>
    <button onclick="test2()">2. Ø¬Ù„Ø¨ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</button>
    <button onclick="test3()">3. Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø§Øª</button>
    
    <div class="result" id="result">Ø§Ù„Ù†ØªÙŠØ¬Ø© ØªØ¸Ù‡Ø± Ù‡Ù†Ø§</div>

    <script>
        const SUPABASE_URL = 'https://kjivdgfacwvdcfaxdedb.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtqaXZkZ2ZhY3d2ZGNmYXhkZWRiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5ODY1MDksImV4cCI6MjA4NjU2MjUwOX0.3SW2jU-Cu3i4Ms5yIFjaDZZ8DQCVI78Rc0ZIyFeFaXo';

        function showResult(text, isError = false) {
            document.getElementById('result').innerHTML = 
                `<div style="color: ${isError ? '#ef4444' : '#10b981'}">${text}</div>`;
        }

        async function test1() {
            showResult('Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...');
            
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/`, {
                    headers: {
                        'apikey': SUPABASE_KEY,
                        'Authorization': `Bearer ${SUPABASE_KEY}`
                    }
                });
                
                if (response.ok) {
                    showResult('âœ… Ø§Ù„Ø§ØªØµØ§Ù„ Ù†Ø§Ø¬Ø­');
                } else {
                    showResult(`âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: ${response.status}`, true);
                }
            } catch (e) {
                showResult(`âŒ Ø®Ø·Ø£: ${e.message}`, true);
            }
        }

        async function test2() {
            showResult('Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª...');
            
            try {
                const response = await fetch(`${SUPABASE_URL}/rest/v1/packages?select=*`, {
                    headers: {
                        'apikey': SUPABASE_KEY,
                        'Authorization': `Bearer ${SUPABASE_KEY}`
                    }
                });
                
                const data = await response.json();
                
                if (data.length === 0) {
                    showResult('âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ø§Ù‚Ø§Øª');
                } else {
                    let text = `âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${data.length} Ø¨Ø§Ù‚Ø§Øª:\n\n`;
                    data.forEach(p => {
                        text += `ğŸ“¦ ${p.name} - ${p.price}$\n`;
                    });
                    showResult(text);
                }
            } catch (e) {
                showResult(`âŒ Ø®Ø·Ø£: ${e.message}`, true);
            }
        }

        async function test3() {
            showResult('Ø¬Ø§Ø±ÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø§Ù‚Ø§Øª...');
            
            const packages = [
                { name: 'Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„ÙØ¶ÙŠØ©', price: 500, profit: 2.5, daily_profit: 12.5, category: 'standard' },
                { name: 'Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©', price: 1000, profit: 2.5, daily_profit: 25, category: 'premium' },
                { name: 'Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø§Ø³ÙŠØ©', price: 5000, profit: 2.5, daily_profit: 125, category: 'vip' }
            ];
            
            try {
                for (let p of packages) {
                    await fetch(`${SUPABASE_URL}/rest/v1/packages`, {
                        method: 'POST',
                        headers: {
                            'apikey': SUPABASE_KEY,
                            'Authorization': `Bearer ${SUPABASE_KEY}`,
                            'Content-Type': 'application/json',
                            'Prefer': 'return=minimal'
                        },
                        body: JSON.stringify({
                            id: crypto.randomUUID ? crypto.randomUUID() : Date.now().toString(),
                            ...p,
                            tasks: 5,
                            duration: 30,
                            status: 'active'
                        })
                    });
                }
                
                showResult('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø§Ù‚Ø§Øª');
                setTimeout(test2, 1000);
            } catch (e) {
                showResult(`âŒ Ø®Ø·Ø£: ${e.message}`, true);
            }
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <script src="shared-data.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© - Elite Investors</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --admin-primary: #1e40af;
            --admin-secondary: #3b82f6;
            --admin-success: #059669;
            --admin-warning: #d97706;
            --admin-danger: #dc2626;
            --admin-dark: #111827;
            --admin-card: #1f2937;
            --admin-text: #f3f4f6;
            --admin-purple: #8b5cf6;
            --admin-info: #0891b2;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: var(--admin-dark);
            color: var(--admin-text);
        }
        
        .admin-container {
            display: flex;
            min-height: 100vh;
        }
        
        .sidebar {
            width: 280px;
            background: var(--admin-dark);
            border-left: 4px solid var(--admin-primary);
            padding: 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.3);
        }
        
        .sidebar-header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(59, 130, 246, 0.3);
        }
        
        .sidebar-header h2 {
            color: var(--admin-secondary);
            font-size: 1.5rem;
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 0;
        }
        
        .sidebar-menu li {
            margin-bottom: 10px;
        }
        
        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            color: #9ca3af;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s;
            border: 1px solid transparent;
            cursor: pointer;
        }
        
        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background: rgba(59, 130, 246, 0.15);
            color: var(--admin-secondary);
            border-color: var(--admin-secondary);
        }
        
        .sidebar-menu i {
            width: 20px;
            text-align: center;
        }
        
        .sidebar-menu .badge {
            background: var(--admin-danger);
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 12px;
            margin-right: auto;
        }
        
        .main-content {
            flex: 1;
            margin-right: 280px;
            padding: 20px;
        }
        
        .admin-header {
            background: var(--admin-card);
            padding: 20px 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(59, 130, 246, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--admin-card);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid var(--admin-primary);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--admin-secondary);
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .stat-trend {
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
        }
        
        .trend-up { color: var(--admin-success); }
        .trend-down { color: var(--admin-danger); }
        
        .admin-table {
            background: var(--admin-card);
            border-radius: 15px;
            overflow: hidden;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .admin-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th {
            background: rgba(59, 130, 246, 0.2);
            padding: 15px;
            text-align: right;
            border-bottom: 2px solid var(--admin-secondary);
            font-weight: 600;
        }
        
        .admin-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .admin-table tr:hover {
            background: rgba(59, 130, 246, 0.1);
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            margin: 0 5px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }
        
        .btn-primary { background: var(--admin-primary); color: white; }
        .btn-success { background: var(--admin-success); color: white; }
        .btn-warning { background: var(--admin-warning); color: white; }
        .btn-danger { background: var(--admin-danger); color: white; }
        .btn-purple { background: var(--admin-purple); color: white; }
        .btn-info { background: var(--admin-info); color: white; }
        
        .btn:hover {
            transform: translateY(-2px);
            opacity: 0.9;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #9ca3af;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 10px;
            color: white;
            font-size: 15px;
            transition: all 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--admin-secondary);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
        }
        
        .status-active {
            background: rgba(5, 150, 105, 0.2);
            color: var(--admin-success);
            border: 1px solid var(--admin-success);
        }
        
        .status-pending {
            background: rgba(217, 119, 6, 0.2);
            color: var(--admin-warning);
            border: 1px solid var(--admin-warning);
        }
        
        .status-rejected {
            background: rgba(220, 38, 38, 0.2);
            color: var(--admin-danger);
            border: 1px solid var(--admin-danger);
        }
        
        .status-suspended {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            border: 1px solid #f59e0b;
        }
        
        .status-banned {
            background: rgba(220, 38, 38, 0.2);
            color: #ef4444;
            border: 1px solid #ef4444;
        }
        
        .search-box {
            background: var(--admin-card);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 12px 18px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 10px;
            color: white;
            font-size: 15px;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--admin-secondary);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }
        
        .modal.active {
            display: flex;
            animation: modalFadeIn 0.3s ease;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .modal-content {
            background: var(--admin-card);
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 600px;
            border: 2px solid var(--admin-primary);
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }
        
        .modal-content.large {
            max-width: 800px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #9ca3b8;
        }
        
        .loading i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--admin-secondary);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .badge {
            background: var(--admin-primary);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            margin-right: 8px;
            display: inline-block;
        }
        
        .badge.success { background: var(--admin-success); }
        .badge.warning { background: var(--admin-warning); }
        .badge.danger { background: var(--admin-danger); }
        .badge.purple { background: var(--admin-purple); }
        
        .referral-code {
            background: linear-gradient(45deg, var(--admin-purple), #7c3aed);
            padding: 8px 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            letter-spacing: 1px;
            display: inline-block;
            margin: 5px 0;
            color: white;
            font-weight: bold;
        }
        
        .referral-stats {
            background: rgba(139, 92, 246, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
        
        .commission-badge {
            background: var(--admin-success);
            color: white;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            margin-right: 5px;
            display: inline-block;
        }
        
        .network-tag {
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: bold;
            margin-right: 5px;
            color: white;
        }
        
        .trc20-tag { background: #14b8a6; }
        .erc20-tag { background: #f59e0b; }
        .bep20-tag { background: #8b5cf6; }
        
        .user-detail-card {
            background: rgba(255,255,255,0.03);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(59,130,246,0.2);
        }
        
        .user-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .user-avatar-large {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, var(--admin-primary), var(--admin-secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: white;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .info-item {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 10px;
        }
        
        .info-label {
            color: #9ca3af;
            font-size: 13px;
            margin-bottom: 5px;
        }
        
        .info-value {
            font-size: 18px;
            font-weight: bold;
            color: white;
        }
        
        .info-value.success { color: var(--admin-success); }
        .info-value.warning { color: var(--admin-warning); }
        .info-value.danger { color: var(--admin-danger); }
        .info-value.info { color: var(--admin-info); }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .chart-container {
            background: var(--admin-card);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        .chart-title {
            margin-bottom: 20px;
            color: var(--admin-secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .sync-status {
            position: fixed;
            bottom: 20px;
            left: 300px;
            background: var(--admin-card);
            padding: 10px 20px;
            border-radius: 50px;
            border: 1px solid var(--admin-primary);
            font-size: 13px;
            z-index: 999;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(5px);
        }
        
        .sync-status.online {
            border-color: var(--admin-success);
            color: var(--admin-success);
        }
        
        .sync-status.offline {
            border-color: var(--admin-danger);
            color: var(--admin-danger);
        }
        
        .admin-notification {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--admin-card);
            color: white;
            padding: 18px 30px;
            border-radius: 12px;
            border-right: 6px solid var(--admin-success);
            z-index: 10000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            animation: slideInDown 0.3s ease;
            min-width: 350px;
            text-align: center;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 15px;
            justify-content: center;
        }
        
        .admin-notification.error {
            border-right-color: var(--admin-danger);
        }
        
        .admin-notification.warning {
            border-right-color: var(--admin-warning);
        }
        
        @keyframes slideInDown {
            from { transform: translate(-50%, -30px); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
        
        @media (max-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .admin-container {
                flex-direction: column;
            }
            
            .sidebar {
                position: relative;
                width: 100%;
                height: auto;
            }
            
            .main-content {
                margin-right: 0;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-table {
                overflow-x: auto;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .search-input {
                width: 100%;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .user-detail-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .sync-status {
                left: 20px;
                bottom: 80px;
            }
        }
        
        .text-success { color: var(--admin-success); }
        .text-warning { color: var(--admin-warning); }
        .text-danger { color: var(--admin-danger); }
        .text-info { color: var(--admin-info); }
        .text-muted { color: #9ca3af; }
        
        .mt-2 { margin-top: 10px; }
        .mt-3 { margin-top: 15px; }
        .mt-4 { margin-top: 20px; }
        .mb-2 { margin-bottom: 10px; }
        .mb-3 { margin-bottom: 15px; }
        .mb-4 { margin-bottom: 20px; }
        
        .text-center { text-align: center; }
        .text-left { text-align: left; }
        .text-right { text-align: right; }
        
        .w-100 { width: 100%; }
        
        .d-flex { display: flex; }
        .align-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 10px; }
        .gap-3 { gap: 15px; }
        .gap-4 { gap: 20px; }
        
        .flex-wrap { flex-wrap: wrap; }
    </style>
</head>
<body>
    <div class="sync-status online" id="syncStatus">
        <i class="fas fa-sync-alt fa-spin" style="display: none;" id="syncSpinner"></i>
        <i class="fas fa-wifi" id="syncIcon"></i>
        <span id="syncText">Ù…ØªØµÙ„ Ø¨Ù€ Supabase</span>
    </div>

    <div class="admin-container">
        <!-- ========== Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ ========== -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-shield-alt"></i> Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
                <small style="color: #9ca3af;">Elite Investors v2.0</small>
            </div>
            
            <ul class="sidebar-menu">
                <li><a href="#" class="active" onclick="showSection('dashboard'); return false;">
                    <i class="fas fa-tachometer-alt"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                    <span id="dashboardBadge" class="badge" style="display: none;">Ø¬Ø¯ÙŠØ¯</span>
                </a></li>
                <li><a href="#" onclick="showSection('users'); return false;">
                    <i class="fas fa-users-cog"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
                    <span id="usersCount" class="badge">0</span>
                </a></li>
                <li><a href="#" onclick="showSection('packages'); return false;">
                    <i class="fas fa-crown"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø§Ù‚Ø§Øª
                    <span id="packagesCount" class="badge">0</span>
                </a></li>
                <li><a href="#" onclick="showSection('tasks'); return false;">
                    <i class="fas fa-tasks"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…
                    <span id="tasksCount" class="badge">0</span>
                </a></li>
                <li><a href="#" onclick="showSection('referrals'); return false;">
                    <i class="fas fa-user-friends"></i> Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø©
                    <span id="referralsCount" class="badge">0</span>
                </a></li>
                <li><a href="#" onclick="showSection('pending'); return false;">
                    <i class="fas fa-clock"></i> Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©
                    <span id="pendingCount" class="badge">0</span>
                </a></li>
                <li><a href="#" onclick="showSection('subscriptions'); return false;">
                    <i class="fas fa-shopping-cart"></i> Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª
                    <span id="subscriptionsCount" class="badge">0</span>
                </a></li>
                <li><a href="#" onclick="showSection('withdrawals'); return false;">
                    <i class="fas fa-money-bill-wave"></i> Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨
                    <span id="withdrawalsCount" class="badge">0</span>
                </a></li>
                <li><a href="#" onclick="showSection('transactions'); return false;">
                    <i class="fas fa-exchange-alt"></i> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
                </a></li>
                <li><a href="#" onclick="showSection('reports'); return false;">
                    <i class="fas fa-chart-bar"></i> Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
                </a></li>
                <li><a href="#" onclick="showSection('settings'); return false;">
                    <i class="fas fa-cog"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </a></li>
                <li><a href="index.html" style="color: var(--admin-danger);">
                    <i class="fas fa-sign-out-alt"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…ÙˆÙ‚Ø¹
                </a></li>
            </ul>
        </div>
        
        <!-- ========== Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ========== -->
        <div class="main-content">
            <!-- ========== Ù‚Ø³Ù… Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ========== -->
            <div id="dashboard-section" class="section active">
                <div class="admin-header">
                    <h2><i class="fas fa-tachometer-alt"></i> Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
                    <div>
                        <span id="currentTime" style="margin-left: 15px; color: #9ca3af;"></span>
                        <button class="btn btn-sm btn-primary" onclick="refreshDashboard()">
                            <i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ«
                        </button>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-value" id="totalUsers">0</div>
                        <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p>
                        <div class="stat-trend" id="usersTrend">
                            <i class="fas fa-arrow-up trend-up"></i>
                            <span id="newUsersToday">+0 Ø§Ù„ÙŠÙˆÙ…</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-money-bill-wave"></i></div>
                        <div class="stat-value" id="totalDeposits">0$</div>
                        <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª</p>
                        <div class="stat-trend" id="depositsTrend">
                            <i class="fas fa-arrow-up trend-up"></i>
                            <span id="todayDeposits">+0$</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-user-friends"></i></div>
                        <div class="stat-value" id="totalReferrals">0</div>
                        <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª</p>
                        <div class="stat-trend" id="referralsTrend">
                            <i class="fas fa-arrow-up trend-up"></i>
                            <span id="referralsThisWeek">+0 Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-clock"></i></div>
                        <div class="stat-value" id="pendingRequests">0</div>
                        <p>Ø·Ù„Ø¨Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</p>
                        <div class="stat-trend" id="pendingTrend">
                            <i class="fas fa-clock"></i>
                            <span id="pendingBreakdown">0 Ø§Ø´ØªØ±Ø§Ùƒ / 0 Ø³Ø­Ø¨</span>
                        </div>
                    </div>
                </div>
                
                <div class="stats-grid" style="grid-template-columns: repeat(5, 1fr);">
                    <div class="stat-card" style="padding: 15px;">
                        <div class="stat-value success" id="activeUsers">0</div>
                        <p>Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù†Ø´Ø·ÙŠÙ†</p>
                    </div>
                    <div class="stat-card" style="padding: 15px;">
                        <div class="stat-value warning" id="suspendedUsers">0</div>
                        <p>Ù…Ø¹Ù„Ù‚ÙŠÙ†</p>
                    </div>
                    <div class="stat-card" style="padding: 15px;">
                        <div class="stat-value danger" id="bannedUsers">0</div>
                        <p>Ù…Ø­Ø¸ÙˆØ±ÙŠÙ†</p>
                    </div>
                    <div class="stat-card" style="padding: 15px;">
                        <div class="stat-value info" id="activeSubscriptions">0</div>
                        <p>Ø¨Ø§Ù‚Ø§Øª Ù†Ø´Ø·Ø©</p>
                    </div>
                    <div class="stat-card" style="padding: 15px;">
                        <div class="stat-value" id="totalWithdrawn">0$</div>
                        <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ø­ÙˆØ¨Ø§Øª</p>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h4 class="chart-title"><i class="fas fa-chart-pie"></i> ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</h4>
                    <div id="packagesChart" style="height: 300px;">
                        <canvas id="packagesChartCanvas"></canvas>
                    </div>
                </div>
                
                <div class="admin-table">
                    <div style="padding: 20px; display: flex; justify-content: space-between;">
                        <h4><i class="fas fa-history"></i> Ø£Ø­Ø¯Ø« Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</h4>
                        <button class="btn btn-sm btn-info" onclick="exportActivities()"><i class="fas fa-download"></i> ØªØµØ¯ÙŠØ±</button>
                    </div>
                    <table>
                        <thead>
                            <tr><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ø§Ù„Ù†Ø´Ø§Ø·</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th></tr>
                        </thead>
                        <tbody id="recentActivities">
                            <tr><td colspan="5" class="loading"><i class="fas fa-spinner fa-spin"></i><p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- ========== Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ========== -->
            <div id="users-section" class="section">
                <div class="admin-header">
                    <h2><i class="fas fa-users-cog"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h2>
                    <div class="action-buttons">
                        <button class="btn btn-sm btn-primary" onclick="refreshUsers()"><i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ«</button>
                        <button class="btn btn-success" onclick="showAddUserModal()"><i class="fas fa-user-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…</button>
                        <button class="btn btn-info" onclick="exportUsers()"><i class="fas fa-file-export"></i> ØªØµØ¯ÙŠØ±</button>
                    </div>
                </div>
                
                <div class="stats-grid" style="grid-template-columns: repeat(6, 1fr); margin-bottom: 20px;">
                    <div class="stat-card" style="padding:15px; background:rgba(30,64,175,0.2);"><div class="stat-value" id="userStatsTotal">0</div><p style="font-size:13px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p></div>
                    <div class="stat-card" style="padding:15px; background:rgba(5,150,105,0.2);"><div class="stat-value success" id="userStatsActive">0</div><p style="font-size:13px;">Ù†Ø´Ø·ÙŠÙ†</p></div>
                    <div class="stat-card" style="padding:15px; background:rgba(139,92,246,0.2);"><div class="stat-value info" id="userStatsWithPackage">0</div><p style="font-size:13px;">Ù„Ø¯ÙŠÙ‡Ù… Ø¨Ø§Ù‚Ø©</p></div>
                    <div class="stat-card" style="padding:15px; background:rgba(245,158,11,0.2);"><div class="stat-value warning" id="userStatsSuspended">0</div><p style="font-size:13px;">Ù…Ø¹Ù„Ù‚ÙŠÙ†</p></div>
                    <div class="stat-card" style="padding:15px; background:rgba(220,38,38,0.2);"><div class="stat-value danger" id="userStatsBanned">0</div><p style="font-size:13px;">Ù…Ø­Ø¸ÙˆØ±ÙŠÙ†</p></div>
                    <div class="stat-card" style="padding:15px; background:rgba(6,182,212,0.2);"><div class="stat-value" id="userStatsBalance">0$</div><p style="font-size:13px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±ØµØ¯Ø©</p></div>
                </div>
                
                <div class="search-box">
                    <div style="display:flex; gap:10px; flex:1; flex-wrap:wrap;">
                        <input type="text" class="search-input" id="userSearchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ØŒ Ø§Ù„Ù‡Ø§ØªÙ..." style="flex:2;" onkeyup="searchUsers()">
                        <select class="search-input" id="userStatusFilter" style="flex:1;" onchange="filterUsers()">
                            <option value="all">ğŸ”µ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</option>
                            <option value="active">ğŸŸ¢ Ù†Ø´Ø·ÙŠÙ†</option>
                            <option value="suspended">ğŸŸ  Ù…Ø¹Ù„Ù‚ÙŠÙ†</option>
                            <option value="banned">ğŸ”´ Ù…Ø­Ø¸ÙˆØ±ÙŠÙ†</option>
                            <option value="with-package">ğŸ’ Ù„Ø¯ÙŠÙ‡Ù… Ø¨Ø§Ù‚Ø©</option>
                            <option value="without-package">ğŸ“¦ Ø¨Ø¯ÙˆÙ† Ø¨Ø§Ù‚Ø©</option>
                        </select>
                        <select class="search-input" id="userPackageFilter" style="flex:1;" onchange="filterUsers()">
                            <option value="all">ğŸ“Š Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</option>
                            <option value="standard">ğŸ¥ˆ ÙØ¶ÙŠØ©</option>
                            <option value="premium">ğŸ¥‡ Ø°Ù‡Ø¨ÙŠØ©</option>
                            <option value="vip">ğŸ’ Ù…Ø§Ø³ÙŠØ©</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="resetUserFilters()"><i class="fas fa-redo-alt"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
                </div>
                
                <div class="admin-table">
                    <table>
                        <thead>
                            <tr><th>#</th><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨</th><th>Ø§Ù„Ø¨Ø§Ù‚Ø© / Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</th><th>Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª</th><th>Ø§Ù„Ø±ØµÙŠØ¯</th><th>Ø§Ù„Ù…Ø³Ø­ÙˆØ¨Ø§Øª</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr>
                        </thead>
                        <tbody id="usersTable">
                            <tr><td colspan="9" class="loading"><i class="fas fa-spinner fa-spin"></i><p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†...</p></td></tr>
                        </tbody>
                    </table>
                    <div id="usersPagination" style="padding:20px; display:flex; justify-content:center; gap:10px;"></div>
                </div>
            </div>
            
            <!-- ========== Ù‚Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ========== -->
            <div id="packages-section" class="section">
                <div class="admin-header">
                    <h2><i class="fas fa-crown"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</h2>
                    <button class="btn btn-success" onclick="showAddPackageModal()"><i class="fas fa-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-value" id="activePackages">0</div><p>Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</p></div>
                    <div class="stat-card"><div class="stat-value" id="activeSubscriptionsCount">0</div><p>Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©</p></div>
                    <div class="stat-card"><div class="stat-value" id="totalInvestments">0$</div><p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª</p></div>
                    <div class="stat-card"><div class="stat-value" id="dailyRevenue">0$</div><p>Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</p></div>
                </div>
                
                <div class="admin-table">
                    <table>
                        <thead>
                            <tr><th>Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ</th><th>Ø§Ù„ÙØ¦Ø©</th><th>Ø§Ù„Ù…Ù‡Ø§Ù…/ÙŠÙˆÙ…</th><th>Ø§Ù„Ù…Ø¯Ø©</th><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr>
                        </thead>
                        <tbody id="packagesTable">
                            <tr><td colspan="9" class="loading"><i class="fas fa-spinner fa-spin"></i><p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª...</p></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- ========== Ù‚Ø³Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù… ========== -->
            <div id="tasks-section" class="section">
                <div class="admin-header">
                    <h2><i class="fas fa-tasks"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</h2>
                    <button class="btn btn-success" onclick="showAddTaskModal()"><i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-value" id="totalTasks">0</div><p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù…</p></div>
                    <div class="stat-card"><div class="stat-value" id="activeTasks">0</div><p>Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù†Ø´Ø·Ø©</p></div>
                    <div class="stat-card"><div class="stat-value" id="totalCompletions">0</div><p>Ù…Ø±Ø§Øª Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„</p></div>
                    <div class="stat-card"><div class="stat-value" id="totalRewards">0$</div><p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª</p></div>
                </div>
                
                <div class="admin-table">
                    <table>
                        <thead>
                            <tr><th>Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©</th><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„Ù…Ø³ØªÙˆÙ‰</th><th>Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©</th><th>Ù…Ø±Ø§Øª Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr>
                        </thead>
                        <tbody id="tasksTable">
                            <tr><td colspan="9" class="loading"><i class="fas fa-spinner fa-spin"></i><p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…...</p></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- ========== Ù‚Ø³Ù… Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø© ========== -->
            <div id="referrals-section" class="section">
                <div class="admin-header">
                    <h2><i class="fas fa-user-friends"></i> Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</h2>
                    <div>
                        <span class="badge success" style="font-size:14px;">ğŸ’° Ø§Ù„Ù…Ø­ÙŠÙ„: 50$</span>
                        <span class="badge warning" style="font-size:14px;">ğŸ Ø§Ù„Ù…Ø­Ø§Ù„: 20$</span>
                        <button class="btn btn-purple" onclick="showReferralSettings()" style="margin-right:15px;"><i class="fas fa-cog"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-icon"><i class="fas fa-user-plus"></i></div><div class="stat-value" id="totalReferralsCount">0</div><p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª</p></div>
                    <div class="stat-card"><div class="stat-icon"><i class="fas fa-money-bill-wave"></i></div><div class="stat-value" id="totalReferralEarnings">0$</div><p>Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</p></div>
                    <div class="stat-card"><div class="stat-icon"><i class="fas fa-clock"></i></div><div class="stat-value warning" id="pendingReferralRewards">0$</div><p>Ù…ÙƒØ§ÙØ¢Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØµØ±Ù</p></div>
                    <div class="stat-card"><div class="stat-icon"><i class="fas fa-percentage"></i></div><div class="stat-value" id="referralConversion">0%</div><p>Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„</p></div>
                </div>
                
                <div class="admin-table">
                    <div style="padding:20px; display:flex; justify-content:space-between;">
                        <h4><i class="fas fa-trophy" style="color:gold;"></i> Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ†</h4>
                        <button class="btn btn-sm btn-success" onclick="payAllCommissions()"><i class="fas fa-money-bill-wave"></i> ØµØ±Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª</button>
                    </div>
                    <table>
                        <thead><tr><th>Ø§Ù„ØªØ±ØªÙŠØ¨</th><th>Ø§Ù„Ù…Ø³ÙˆÙ‚</th><th>ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</th><th>Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª</th><th>Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©</th><th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ù„Øº</th><th>Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø³ØªØ­Ù‚Ø©</th><th>Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø©</th><th>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
                        <tbody id="topMarketersTable"><tr><td colspan="10" class="loading"><i class="fas fa-spinner fa-spin"></i><p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p></td></tr></tbody>
                    </table>
                </div>
            </div>
            
            <!-- ========== Ù‚Ø³Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø© ========== -->
            <div id="pending-section" class="section">
                <div class="admin-header">
                    <h2><i class="fas fa-clock"></i> Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</h2>
                    <div><button class="btn btn-sm btn-primary" onclick="refreshPending()"><i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ«</button></div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-value" id="pendingPackagesCount">0</div><p>Ø·Ù„Ø¨Ø§Øª Ø§Ø´ØªØ±Ø§Ùƒ Ù…Ø¹Ù„Ù‚Ø©</p></div>
                    <div class="stat-card"><div class="stat-value" id="pendingWithdrawalsCount">0</div><p>Ø·Ù„Ø¨Ø§Øª Ø³Ø­Ø¨ Ù…Ø¹Ù„Ù‚Ø©</p></div>
                    <div class="stat-card"><div class="stat-value" id="totalPendingAmount">0$</div><p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ø§Ù„Øº Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</p></div>
                    <div class="stat-card"><div class="stat-value" id="avgPendingTime">0h</div><p>Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p></div>
                </div>
                
                <div class="admin-table">
                    <div style="padding:20px;"><h4><i class="fas fa-shopping-cart"></i> Ø·Ù„Ø¨Ø§Øª Ø§Ø´ØªØ±Ø§Ùƒ Ù…Ø¹Ù„Ù‚Ø©</h4></div>
                    <table>
                        <thead><tr><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ø§Ù„Ø¨Ø§Ù‚Ø©</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th><th>Ø§Ù„Ø´Ø¨ÙƒØ©</th><th>Ø§Ù„Ø³Ø±Ø¹Ø©</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
                        <tbody id="pendingPackagesTable"><tr><td colspan="10" class="loading"><i class="fas fa-spinner fa-spin"></i><p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª...</p></td></tr></tbody>
                    </table>
                </div>
            </div>
            
            <!-- ========== Ù‚Ø³Ù… Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ========== -->
            <div id="subscriptions-section" class="section">
                <div class="admin-header">
                    <h2><i class="fas fa-shopping-cart"></i> Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©</h2>
                    <div><button class="btn btn-sm btn-primary" onclick="refreshSubscriptions()"><i class="fas fa-sync-alt"></i> ØªØ­Ø¯ÙŠØ«</button></div>
                </div>
                
                <div class="admin-table">
                    <table>
                        <thead><tr><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ø§Ù„Ø¨Ø§Ù‚Ø©</th><th>Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</th><th>Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ</th><th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡</th><th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</th><th>Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
                        <tbody id="subscriptionsTable"><tr><td colspan="9" class="loading"><i class="fas fa-spinner fa-spin"></i><p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª...</p></td></tr></tbody>
                    </table>
                </div>
            </div>
            
            <!-- ========== Ù‚Ø³Ù… Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨ ========== -->
            <div id="withdrawals-section" class="section">
                <div class="admin-header">
                    <h2><i class="fas fa-money-bill-wave"></i> Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨</h2>
                    <div><button class="btn btn-sm btn-primary" onclick="exportWithdrawals()"><i class="fas fa-download"></i> ØªØµØ¯ÙŠØ±</button></div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-value" id="totalWithdrawalsCount">0</div><p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨</p></div>
                    <div class="stat-card"><div class="stat-value" id="totalWithdrawnAmount">0$</div><p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ø­ÙˆØ¨Ø§Øª</p></div>
                    <div class="stat-card"><div class="stat-value" id="avgWithdrawal">0$</div><p>Ù…ØªÙˆØ³Ø· Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³Ø­Ø¨</p></div>
                    <div class="stat-card"><div class="stat-value" id="rejectedWithdrawals">0</div><p>Ø·Ù„Ø¨Ø§Øª Ù…Ø±ÙÙˆØ¶Ø©</p></div>
                </div>
                
                <div class="search-box">
                    <select class="search-input" id="withdrawalStatusFilter" onchange="filterWithdrawals()">
                        <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</option>
                        <option value="pending">Ù…Ø¹Ù„Ù‚Ø© ÙÙ‚Ø·</option>
                        <option value="approved">Ù…Ù‚Ø¨ÙˆÙ„Ø© ÙÙ‚Ø·</option>
                        <option value="rejected">Ù…Ø±ÙÙˆØ¶Ø© ÙÙ‚Ø·</option>
                    </select>
                    <input type="date" class="search-input" id="withdrawalDateFilter" onchange="filterWithdrawals()">
                    <button class="btn btn-primary" onclick="filterWithdrawals()"><i class="fas fa-filter"></i> ØªØµÙÙŠØ©</button>
                </div>
                
                <div class="admin-table">
                    <table>
                        <thead><tr><th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„Ø±Ø³ÙˆÙ…</th><th>Ø§Ù„Ø´Ø¨ÙƒØ©</th><th>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©</th><th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø·Ù„Ø¨</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
                        <tbody id="withdrawalsTable"><tr><td colspan="9" class="loading"><i class="fas fa-spinner fa-spin"></i><p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨...</p></td></tr></tbody>
                    </table>
                </div>
            </div>
            
            <!-- ========== Ù‚Ø³Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ========== -->
            <div id="transactions-section" class="section">
                <div class="admin-header">
                    <h2><i class="fas fa-exchange-alt"></i> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª</h2>
                    <div><button class="btn btn-sm btn-primary" onclick="exportAllTransactions()"><i class="fas fa-download"></i> ØªØµØ¯ÙŠØ±</button></div>
                </div>
                
                <div class="search-box">
                    <input type="text" class="search-input" id="transactionSearch" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø¹Ø§Ù…Ù„Ø©..." onkeyup="searchTransactions()">
                    <select class="search-input" id="transactionTypeFilter" onchange="filterTransactions()">
                        <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª</option>
                        <option value="Ø§Ø´ØªØ±Ø§Ùƒ">Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</option>
                        <option value="Ø³Ø­Ø¨">Ø³Ø­ÙˆØ¨Ø§Øª</option>
                        <option value="Ø±Ø¨Ø­">Ø£Ø±Ø¨Ø§Ø­</option>
                        <option value="Ù…ÙƒØ§ÙØ£Ø©">Ù…ÙƒØ§ÙØ¢Øª</option>
                        <option value="Ù…ÙƒØ§ÙØ£Ø© Ø¥Ø­Ø§Ù„Ø©">Ù…ÙƒØ§ÙØ¢Øª Ø¥Ø­Ø§Ù„Ø©</option>
                    </select>
                    <input type="date" class="search-input" id="transactionDateFilter" onchange="filterTransactions()">
                </div>
                
                <div class="admin-table">
                    <table>
                        <thead><tr><th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th><th>Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
                        <tbody id="transactionsTable"><tr><td colspan="7" class="loading"><i class="fas fa-spinner fa-spin"></i><p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª...</p></td></tr></tbody>
                    </table>
                </div>
            </div>
            
            <!-- ========== Ù‚Ø³Ù… Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ========== -->
            <div id="reports-section" class="section">
                <div class="admin-header">
                    <h2><i class="fas fa-chart-bar"></i> Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
                    <div>
                        <button class="btn btn-primary" onclick="generateReport('daily')"><i class="fas fa-file-pdf"></i> ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ</button>
                        <button class="btn btn-success" onclick="generateReport('monthly')" style="margin-right:10px;"><i class="fas fa-file-excel"></i> ØªÙ‚Ø±ÙŠØ± Ø´Ù‡Ø±ÙŠ</button>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-value" id="todayRevenue">0$</div><p>Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…</p></div>
                    <div class="stat-card"><div class="stat-value" id="weekRevenue">0$</div><p>Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</p></div>
                    <div class="stat-card"><div class="stat-value" id="monthRevenue">0$</div><p>Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±</p></div>
                    <div class="stat-card"><div class="stat-value" id="growthRate">0%</div><p>Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ù…Ùˆ</p></div>
                </div>
                
                <div class="chart-container">
                    <h4 class="chart-title"><i class="fas fa-chart-line"></i> Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø¢Ø®Ø± 7 Ø£ÙŠØ§Ù…</h4>
                    <div id="revenueChart" style="height:300px;"><canvas id="revenueChartCanvas"></canvas></div>
                </div>
            </div>
            
            <!-- ========== Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ========== -->
            <div id="settings-section" class="section">
                <div class="admin-header">
                    <h2><i class="fas fa-cog"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
                </div>
                
                <div class="admin-table">
                    <div style="padding:20px;"><h4><i class="fas fa-user-friends"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</h4></div>
                    <div style="padding:20px;">
                        <div class="form-group"><label>Ù…ÙƒØ§ÙØ£Ø© ØµØ§Ø­Ø¨ Ø§Ù„ÙƒÙˆØ¯ (Ø§Ù„Ù…Ø­ÙŠÙ„) - $</label><input type="number" class="form-control" id="referrerReward" value="50" min="10" max="500" step="5"></div>
                        <div class="form-group"><label>Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ø§Ù„Ù…Ø­Ø§Ù„) - $</label><input type="number" class="form-control" id="refereeReward" value="20" min="5" max="200" step="5"></div>
                        <div class="form-group"><label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨ ($)</label><input type="number" class="form-control" id="minWithdrawal" value="50" min="10" step="10"></div>
                        <div class="form-group"><label>Ø±Ø³ÙˆÙ… Ø´Ø¨ÙƒØ© TRC20 ($)</label><input type="number" class="form-control" id="trc20Fee" value="5" min="0" step="1"></div>
                        <div class="form-group"><label>Ø±Ø³ÙˆÙ… Ø´Ø¨ÙƒØ© ERC20 ($)</label><input type="number" class="form-control" id="erc20Fee" value="15" min="0" step="1"></div>
                        <div class="form-group"><label>Ø±Ø³ÙˆÙ… Ø´Ø¨ÙƒØ© BEP20 ($)</label><input type="number" class="form-control" id="bep20Fee" value="3" min="0" step="1"></div>
                        <button class="btn btn-success" onclick="saveSystemSettings()"><i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

â€<!-- ========== Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… ========== -->
    <div class="modal" id="addUserModal">
        <div class="modal-content">
            <h3 style="text-align:center; margin-bottom:25px;"><i class="fas fa-user-plus" style="color:var(--admin-success);"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</h3>
            <div class="form-group"><label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ *</label><input type="text" class="form-control" id="userFullName" required></div>
            <div class="form-group"><label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… *</label><input type="text" class="form-control" id="userUsername" required></div>
            <div class="form-group"><label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *</label><input type="email" class="form-control" id="userEmail" required></div>
            <div class="form-group"><label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label><input type="tel" class="form-control" id="userPhone" required></div>
            <div class="form-group"><label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± *</label><input type="password" class="form-control" id="userPassword" required></div>
            <div class="form-group"><label>ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø­Ø§Ù„Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label><input type="text" class="form-control" id="userReferralCode"></div>
            <div class="form-group"><label>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ ($)</label><input type="number" class="form-control" id="userBalance" value="0" min="0" step="10"></div>
            <div class="form-group">
                <label>Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨</label>
                <select class="form-control" id="userType"><option value="user">ğŸ‘¤ Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ</option><option value="admin">ğŸ‘‘ Ù…Ø´Ø±Ù</option></select>
            </div>
            <div class="form-group">
                <label>Ø§Ù„Ø­Ø§Ù„Ø©</label>
                <select class="form-control" id="userStatus"><option value="active">ğŸŸ¢ Ù†Ø´Ø·</option><option value="suspended">ğŸŸ  Ù…Ø¹Ù„Ù‚</option><option value="banned">ğŸ”´ Ù…Ø­Ø¸ÙˆØ±</option></select>
            </div>
            <div style="display:flex; gap:15px; margin-top:25px;">
                <button class="btn" style="flex:1; background:var(--admin-danger);" onclick="closeModal('addUserModal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn" style="flex:2; background:var(--admin-success);" onclick="addUser()"><i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</button>
            </div>
        </div>
    </div>
    
â€    <!-- ========== Ù†Ø§ÙØ°Ø© ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ========== -->
    <div class="modal" id="userDetailsModal">
        <div class="modal-content large">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:25px;">
                <h3 style="display:flex; align-items:center; gap:10px;"><i class="fas fa-user-circle" style="color:var(--admin-primary);"></i> ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h3>
                <button class="btn btn-sm" style="background:var(--admin-danger);" onclick="closeModal('userDetailsModal')"><i class="fas fa-times"></i></button>
            </div>
            <div id="userDetailsContent"><!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ --></div>
        </div>
    </div>
    
â€    <!-- ========== Ù†Ø§ÙØ°Ø© ØªØ¹Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ========== -->
    <div class="modal" id="userStatusModal">
        <div class="modal-content">
            <h3 style="text-align:center; margin-bottom:25px;"><i class="fas fa-shield-alt" style="color:var(--admin-warning);"></i> ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h3>
            <div id="statusUserInfo" style="background:rgba(59,130,246,0.1); padding:15px; border-radius:10px; margin-bottom:20px;"><!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ --></div>
            <div class="form-group">
                <label>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
                <select class="form-control" id="newUserStatus">
                    <option value="active">ğŸŸ¢ Ù†Ø´Ø·</option>
                    <option value="suspended">ğŸŸ  Ù…Ø¹Ù„Ù‚</option>
                    <option value="banned">ğŸ”´ Ù…Ø­Ø¸ÙˆØ±</option>
                </select>
            </div>
            <div class="form-group"><label>Ø³Ø¨Ø¨ Ø§Ù„ØªØºÙŠÙŠØ±</label><textarea class="form-control" id="statusReason" rows="3" placeholder="Ø£Ø¯Ø®Ù„ Ø³Ø¨Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø©..."></textarea></div>
            <div style="display:flex; gap:15px; margin-top:25px;">
                <button class="btn" style="flex:1; background:var(--admin-danger);" onclick="closeModal('userStatusModal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn" style="flex:2; background:var(--admin-warning);" onclick="confirmUpdateUserStatus()"><i class="fas fa-save"></i> ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©</button>
            </div>
        </div>
    </div>
    
â€    <!-- ========== Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø© ========== -->
    <div class="modal" id="addPackageModal">
        <div class="modal-content">
            <h3 style="text-align:center; margin-bottom:25px;"><i class="fas fa-crown" style="color:var(--admin-success);"></i> Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
            <div class="form-group"><label>Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø© *</label><input type="text" class="form-control" id="packageName" required></div>
            <div class="form-group"><label>Ø³Ø¹Ø± Ø§Ù„Ø¨Ø§Ù‚Ø© ($) *</label><input type="number" class="form-control" id="packagePrice" required></div>
            <div class="form-group"><label>Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ÙŠÙˆÙ…ÙŠ (%) *</label><input type="number" class="form-control" id="packageProfit" value="2.5" step="0.1" required></div>
            <div class="form-group">
                <label>ÙØ¦Ø© Ø§Ù„Ø¨Ø§Ù‚Ø© *</label>
                <select class="form-control" id="packageCategory" required>
                    <option value="standard">ğŸ¥ˆ Ø¹Ø§Ø¯ÙŠØ©</option>
                    <option value="premium">ğŸ¥‡ Ù…Ù…ÙŠØ²Ø©</option>
                    <option value="vip">ğŸ’ VIP</option>
                </select>
            </div>
            <div class="form-group"><label>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ© *</label><input type="number" class="form-control" id="packageTasks" value="5" min="1" max="20" required></div>
            <div class="form-group"><label>Ù…Ø¯Ø© Ø§Ù„Ø¨Ø§Ù‚Ø© (Ø¨Ø§Ù„Ø£ÙŠØ§Ù…) *</label><input type="number" class="form-control" id="packageDuration" value="30" min="1" max="365" required></div>
            <div class="form-group"><label>ÙˆØµÙ Ø§Ù„Ø¨Ø§Ù‚Ø©</label><textarea class="form-control" id="packageDescription" rows="3" placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙØ§Ù‹ Ù„Ù„Ø¨Ø§Ù‚Ø©..."></textarea></div>
            <div style="display:flex; gap:15px; margin-top:25px;">
                <button class="btn" style="flex:1; background:var(--admin-danger);" onclick="closeModal('addPackageModal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn" style="flex:2; background:var(--admin-success);" onclick="addPackage()"><i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¨Ø§Ù‚Ø©</button>
            </div>
        </div>
    </div>
    
â€    <!-- ========== Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© ========== -->
    <div class="modal" id="addTaskModal">
        <div class="modal-content">
            <h3 style="text-align:center; margin-bottom:25px;"><i class="fas fa-tasks" style="color:var(--admin-success);"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h3>
            <div class="form-group"><label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ù‡Ù…Ø© *</label><input type="text" class="form-control" id="taskTitle" required></div>
            <div class="form-group"><label>ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø© *</label><textarea class="form-control" id="taskDesc" rows="3" required></textarea></div>
            <div class="form-group"><label>Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© ($) *</label><input type="number" class="form-control" id="taskReward" step="0.1" min="0.1" required></div>
            <div class="form-group">
                <label>Ù†ÙˆØ¹ Ø§Ù„Ù…Ù‡Ù…Ø©</label>
                <select class="form-control" id="taskType"><option value="daily">ÙŠÙˆÙ…ÙŠØ©</option><option value="weekly">Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©</option></select>
            </div>
            <div class="form-group">
                <label>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨</label>
                <select class="form-control" id="taskLevel"><option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</option><option value="premium">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ù…ÙŠØ²ÙŠÙ†</option><option value="vip">VIP ÙÙ‚Ø·</option></select>
            </div>
            <div class="form-group">
                <label>Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø© *</label>
                <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:10px;">
                    <label style="display:block; margin-bottom:10px;"><input type="checkbox" id="catStandard" value="standard" checked> <span style="margin-right:10px;">ğŸ¥ˆ Ø¹Ø§Ø¯ÙŠØ©</span></label>
                    <label style="display:block; margin-bottom:10px;"><input type="checkbox" id="catPremium" value="premium" checked> <span style="margin-right:10px;">ğŸ¥‡ Ù…Ù…ÙŠØ²Ø©</span></label>
                    <label style="display:block;"><input type="checkbox" id="catVip" value="vip"> <span style="margin-right:10px;">ğŸ’ VIP</span></label>
                </div>
            </div>
            <div class="form-group">
                <label>Ø§Ù„ØµØ¹ÙˆØ¨Ø©</label>
                <select class="form-control" id="taskDifficulty"><option value="easy">Ø³Ù‡Ù„Ø©</option><option value="medium">Ù…ØªÙˆØ³Ø·Ø©</option><option value="hard">ØµØ¹Ø¨Ø©</option></select>
            </div>
            <div class="form-group"><label>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ (Ø¯Ù‚Ø§Ø¦Ù‚)</label><input type="number" class="form-control" id="taskTime" value="2" min="1"></div>
            <div style="display:flex; gap:15px; margin-top:25px;">
                <button class="btn" style="flex:1; background:var(--admin-danger);" onclick="closeModal('addTaskModal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn" style="flex:2; background:var(--admin-success);" onclick="addTask()"><i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ù…Ù‡Ù…Ø©</button>
            </div>
        </div>
    </div>
    
â€    <!-- ========== Ù†Ø§ÙØ°Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ø§Ø´ØªØ±Ø§Ùƒ ========== -->
    <div class="modal" id="processRequestModal">
        <div class="modal-content">
            <h3 style="text-align:center; margin-bottom:25px;"><i class="fas fa-cog" style="color:var(--admin-warning);"></i> Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</h3>
            <div id="requestDetails" class="referral-stats" style="background:rgba(245,158,11,0.1);"><!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ --></div>
            <div id="referralRewardInfo" style="background:rgba(139,92,246,0.1); padding:15px; border-radius:10px; margin:20px 0; border:1px solid rgba(139,92,246,0.3);">
                <h5 style="color:var(--admin-purple); margin-bottom:10px; display:flex; align-items:center; gap:8px;"><i class="fas fa-gift"></i> Ù…ÙƒØ§ÙØ£Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</h5>
                <p id="referralRewardText">Ø³ÙŠØªÙ… Ù…Ù†Ø­ 20$ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ùˆ 50$ Ù„Ù„Ù…Ø³ÙˆÙ‚ Ø¹Ù†Ø¯ Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨</p>
            </div>
            <div class="form-group"><label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label><textarea class="form-control" id="processNotes" rows="3" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ù„Ø§Ø­Ø¸Ø§Øª..."></textarea></div>
            <div style="display:flex; gap:10px; margin-top:25px;">
                <button class="btn" style="flex:1; background:var(--admin-danger);" onclick="rejectRequest()"><i class="fas fa-times"></i> Ø±ÙØ¶</button>
                <button class="btn" style="flex:1; background:var(--admin-warning);" onclick="requestMoreInfo()"><i class="fas fa-info-circle"></i> Ø·Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</button>
                <button class="btn" style="flex:2; background:var(--admin-success);" onclick="approveRequest()"><i class="fas fa-check"></i> Ù‚Ø¨ÙˆÙ„ ÙˆØªÙØ¹ÙŠÙ„</button>
            </div>
        </div>
    </div>
    
â€    <!-- ========== Ù†Ø§ÙØ°Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø³Ø­Ø¨ ========== -->
    <div class="modal" id="processWithdrawalModal">
        <div class="modal-content">
            <h3 style="text-align:center; margin-bottom:25px;"><i class="fas fa-money-bill-wave" style="color:var(--admin-warning);"></i> Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨</h3>
            <div id="withdrawalDetails"><!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ --></div>
            <div class="form-group" style="margin-top:20px;"><label>Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© (Transaction Hash)</label><input type="text" class="form-control" id="withdrawalTxHash" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ©"></div>
            <div class="form-group"><label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label><textarea class="form-control" id="withdrawalNotes" rows="2" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ù„Ø§Ø­Ø¸Ø§Øª..."></textarea></div>
            <div style="display:flex; gap:15px; margin-top:25px;">
                <button class="btn" style="flex:1; background:var(--admin-danger);" onclick="rejectWithdrawal()"><i class="fas fa-times"></i> Ø±ÙØ¶</button>
                <button class="btn" style="flex:2; background:var(--admin-success);" onclick="completeWithdrawal()"><i class="fas fa-check"></i> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>
    
â€    <!-- ========== Ù†Ø§ÙØ°Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¥Ø­Ø§Ù„Ø© ========== -->
    <div class="modal" id="referralSettingsModal">
        <div class="modal-content">
            <h3 style="text-align:center; margin-bottom:25px;"><i class="fas fa-user-friends" style="color:var(--admin-purple);"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</h3>
            <div class="form-group"><label>Ù…ÙƒØ§ÙØ£Ø© ØµØ§Ø­Ø¨ Ø§Ù„ÙƒÙˆØ¯ (Ø§Ù„Ù…Ø­ÙŠÙ„) - $</label><input type="number" class="form-control" id="modalReferrerReward" value="50" min="10" max="500" step="5"></div>
            <div class="form-group"><label>Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ø§Ù„Ù…Ø­Ø§Ù„) - $</label><input type="number" class="form-control" id="modalRefereeReward" value="20" min="5" max="200" step="5"></div>
            <div class="form-group"><label>ØªÙØ¹ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø­Ø§Ù„Ø©</label><select class="form-control" id="referralActive"><option value="true">âœ… Ù…ÙØ¹Ù„</option><option value="false">âŒ Ù…Ø¹Ø·Ù„</option></select></div>
            <div style="background:rgba(139,92,246,0.1); padding:15px; border-radius:10px; margin:20px 0;">
                <p style="color:#cbd5e1; font-size:14px;"><i class="fas fa-info-circle" style="color:var(--admin-purple);"></i> Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ø¥Ø­Ø§Ù„Ø© ØªÙØµØ±Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ù‚Ø¨ÙˆÙ„ Ø·Ù„Ø¨ Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø­Ø§Ù„.</p>
            </div>
            <div style="display:flex; gap:15px; margin-top:25px;">
                <button class="btn" style="flex:1; background:var(--admin-danger);" onclick="closeModal('referralSettingsModal')">Ø¥Ù„ØºØ§Ø¡</button>
                <button class="btn" style="flex:2; background:var(--admin-success);" onclick="saveReferralSettings()"><i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
            </div>
        </div>
    </div>
    
â€    <!-- ========== Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ========== -->
    <div class="admin-notification" id="notification" style="display:none;"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
â€        // ==================== Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù… - Ù†Ø³Ø®Ø© Ù…ØµØ­Ø­Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ====================
        
â€        // ---------- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ----------
        let adminData = {
            users: [],
            packages: [],
            tasks: [],
            subscriptions: [],
            withdrawals: [],
            transactions: [],
            pendingPackages: [],
            pendingWithdrawals: [],
            referrals: [],
            topMarketers: []
        };

        let currentRequestId = null;
        let currentUserId = null;
        let supabaseAvailable = false;
        
        let packagesChart = null;
        let revenueChart = null;
        
        let currentPage = 1;
        const usersPerPage = 20;

â€        // ========== Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Supabase ==========
        function checkSupabase() {
            supabaseAvailable = !!(window.supabaseClient && window.supabaseHelpers);
            const syncStatus = document.getElementById('syncStatus');
            if (syncStatus) {
                syncStatus.className = supabaseAvailable ? 'sync-status online' : 'sync-status offline';
                document.getElementById('syncIcon').className = supabaseAvailable ? 'fas fa-wifi' : 'fas fa-exclamation-triangle';
                document.getElementById('syncText').textContent = supabaseAvailable ? 'Ù…ØªØµÙ„ Ø¨Ù€ Supabase' : 'ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ';
            }
            return supabaseAvailable;
        }

â€        // ========== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ==========
        function initAdminPanel() {
            console.log('ğŸš€ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©...');
            checkSupabase();
            loadAllData();
            updateTime();
            setInterval(updateTime, 1000);
            setInterval(loadAllData, 30000);
            showSection('dashboard');
        }

â€        // ========== ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ==========
        async function loadAllData() {
            await loadUsers();
            await loadPackages();
            await loadTasks();
            await loadReferrals();
            await loadPendingRequests();
            await loadSubscriptions();
            await loadWithdrawals();
            await loadTransactions();
            updateDashboardStats();
            updateCharts();
        }

â€        // ========== Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ==========
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.sidebar-menu a').forEach(l => l.classList.remove('active'));
            
            document.getElementById(sectionId + '-section').classList.add('active');
            const activeLink = Array.from(document.querySelectorAll('.sidebar-menu a')).find(a => 
                a.getAttribute('onclick')?.includes(sectionId)
            );
            if (activeLink) activeLink.classList.add('active');
            
            if (sectionId === 'dashboard') updateDashboardStats();
            else if (sectionId === 'users') loadUsers();
            else if (sectionId === 'packages') loadPackages();
            else if (sectionId === 'tasks') loadTasks();
            else if (sectionId === 'referrals') loadReferrals();
            else if (sectionId === 'pending') loadPendingRequests();
            else if (sectionId === 'subscriptions') loadSubscriptions();
            else if (sectionId === 'withdrawals') loadWithdrawals();
            else if (sectionId === 'transactions') loadTransactions();
        }

â€        // ========== ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ==========
        function updateDashboardStats() {
            const stats = window.sharedData?.getDashboardStats() || {};
            const users = adminData.users;
            const pendingPackages = adminData.pendingPackages;
            const pendingWithdrawals = adminData.pendingWithdrawals;
            
            document.getElementById('totalUsers').textContent = stats.totalUsers || users.length;
            document.getElementById('totalDeposits').textContent = (stats.totalDeposits || 0).toFixed(2) + '$';
            document.getElementById('totalReferrals').textContent = stats.totalReferrals || 0;
            document.getElementById('pendingRequests').textContent = (pendingPackages?.length || 0) + (pendingWithdrawals?.length || 0);
            document.getElementById('pendingBreakdown').textContent = `${pendingPackages?.length || 0} Ø§Ø´ØªØ±Ø§Ùƒ / ${pendingWithdrawals?.length || 0} Ø³Ø­Ø¨`;
            
            document.getElementById('activeUsers').textContent = users.filter(u => u.status === 'active' || !u.status).length;
            document.getElementById('suspendedUsers').textContent = users.filter(u => u.status === 'suspended').length;
            document.getElementById('bannedUsers').textContent = users.filter(u => u.status === 'banned').length;
            document.getElementById('activeSubscriptions').textContent = users.filter(u => u.package?.status === 'Ù†Ø´Ø·').length;
            
            document.getElementById('usersCount').textContent = users.length;
            document.getElementById('pendingCount').textContent = (pendingPackages?.length || 0) + (pendingWithdrawals?.length || 0);
            document.getElementById('withdrawalsCount').textContent = adminData.withdrawals?.length || 0;
            document.getElementById('subscriptionsCount').textContent = adminData.subscriptions?.length || 0;
            
            updateUserManagementStats();
            updateRecentActivities();
        }

        function updateUserManagementStats() {
            const users = adminData.users;
            const stats = {
                total: users.length,
                active: users.filter(u => u.status === 'active' || !u.status).length,
                withPackage: users.filter(u => u.package).length,
                suspended: users.filter(u => u.status === 'suspended').length,
                banned: users.filter(u => u.status === 'banned').length,
                totalBalance: users.reduce((sum, u) => sum + (u.balance || 0), 0)
            };
            
            document.getElementById('userStatsTotal').textContent = stats.total;
            document.getElementById('userStatsActive').textContent = stats.active;
            document.getElementById('userStatsWithPackage').textContent = stats.withPackage;
            document.getElementById('userStatsSuspended').textContent = stats.suspended;
            document.getElementById('userStatsBanned').textContent = stats.banned;
            document.getElementById('userStatsBalance').textContent = stats.totalBalance.toFixed(2) + '$';
        }

â€        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ==========
        async function loadUsers() {
            let users = [];
            if (supabaseAvailable) {
                try {
                    const result = await window.supabaseHelpers.getAllUsers();
                    if (result.success) users = result.data;
                } catch (e) { console.log('âš ï¸ ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ù† Supabase'); }
            }
            if (!users.length) users = JSON.parse(localStorage.getItem('elite_users')) || [];
            
            users.forEach(u => {
                if (!u.status) u.status = 'active';
                if (!u.totalEarned) u.totalEarned = 0;
                if (!u.totalWithdrawn) u.totalWithdrawn = 0;
            });
            
            adminData.users = users;
            displayUsers(users);
            updateDashboardStats();
        }

        function displayUsers(users) {
            const table = document.getElementById('usersTable');
            if (!users.length) {
                table.innerHTML = '<tr><td colspan="9" class="loading"><i class="fas fa-users"></i><p>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p></td></tr>';
                return;
            }
            
            let filtered = filterUsersData(users);
            const search = document.getElementById('userSearchInput')?.value.toLowerCase() || '';
            if (search) {
                filtered = filtered.filter(u => 
                    u.name?.toLowerCase().includes(search) ||
                    u.email?.toLowerCase().includes(search) ||
                    u.username?.toLowerCase().includes(search) ||
                    u.phone?.includes(search)
                );
            }
            
            const packageFilter = document.getElementById('userPackageFilter')?.value;
            if (packageFilter && packageFilter !== 'all') {
                filtered = filtered.filter(u => u.package?.category === packageFilter);
            }
            
            const totalPages = Math.ceil(filtered.length / usersPerPage);
            const start = (currentPage - 1) * usersPerPage;
            const pageUsers = filtered.slice(start, start + usersPerPage);
            
            let html = '';
            pageUsers.forEach((user, i) => {
                const referralCount = adminData.users.filter(u => u.referredBy === user.referralCode).length;
                const withdrawals = JSON.parse(localStorage.getItem(`user_withdrawals_${user.id}`)) || [];
                const totalWithdrawn = withdrawals.filter(w => w.status === 'Ù…ÙƒØªÙ…Ù„').reduce((s, w) => s + (w.amount || 0), 0);
                
                let statusClass = 'status-active', statusText = 'Ù†Ø´Ø·', statusIcon = 'ğŸŸ¢';
                if (user.status === 'suspended') { statusClass = 'status-suspended'; statusText = 'Ù…Ø¹Ù„Ù‚'; statusIcon = 'ğŸŸ '; }
                else if (user.status === 'banned') { statusClass = 'status-banned'; statusText = 'Ù…Ø­Ø¸ÙˆØ±'; statusIcon = 'ğŸ”´'; }
                
                html += `<tr>
                    <td>${start + i + 1}</td>
                    <td><div style="display:flex; align-items:center; gap:10px;"><div style="width:40px; height:40px; background:linear-gradient(45deg,var(--admin-primary),var(--admin-secondary)); border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold;">${user.name?.charAt(0) || 'Ù…'}</div><div><strong>${user.name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}</strong><br><small>@${user.username || ''}</small></div></div></td>
                    <td>${user.email || ''}<br><small>${user.phone || ''}</small></td>
                    <td>${user.package ? `<strong style="color:var(--admin-success);">${user.package.name}</strong><br><small>ğŸ’° ${user.package.amount}$</small>` : '<span style="color:#9ca3af;">Ù„Ø§ ÙŠÙˆØ¬Ø¯</span>'}</td>
                    <td><div><strong>${referralCount}</strong></div></td>
                    <td><div style="font-weight:bold;">${(user.balance || 0).toFixed(2)}$</div></td>
                    <td>${totalWithdrawn.toFixed(2)}$</td>
                    <td><span class="status-badge ${statusClass}">${statusIcon} ${statusText}</span></td>
                    <td><button class="btn btn-sm btn-info" onclick="viewUserDetails(${user.id})"><i class="fas fa-eye"></i></button></td>
                </tr>`;
            });
            
            table.innerHTML = html;
            displayPagination(totalPages);
        }

        function filterUsersData(users) {
            const status = document.getElementById('userStatusFilter')?.value;
            if (!status || status === 'all') return users;
            
            if (status === 'active') return users.filter(u => u.status === 'active' || !u.status);
            if (status === 'suspended') return users.filter(u => u.status === 'suspended');
            if (status === 'banned') return users.filter(u => u.status === 'banned');
            if (status === 'with-package') return users.filter(u => u.package);
            if (status === 'without-package') return users.filter(u => !u.package);
            return users;
        }

        function displayPagination(totalPages) {
            const div = document.getElementById('usersPagination');
            if (!div) return;
            if (totalPages <= 1) { div.innerHTML = ''; return; }
            
            let html = `<button class="btn btn-sm" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}><i class="fas fa-chevron-right"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚</button>`;
            for (let i = 1; i <= Math.min(totalPages, 5); i++) {
                html += `<button class="btn btn-sm ${i === currentPage ? 'btn-primary' : ''}" onclick="changePage(${i})">${i}</button>`;
            }
            if (totalPages > 5) html += `<span style="margin:0 5px;">...</span><button class="btn btn-sm" onclick="changePage(${totalPages})">${totalPages}</button>`;
            html += `<button class="btn btn-sm" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-chevron-left"></i></button>`;
            div.innerHTML = html;
        }

        function changePage(page) { currentPage = page; loadUsers(); }
        function filterUsers() { currentPage = 1; loadUsers(); }
        function searchUsers() { currentPage = 1; loadUsers(); }
        
        function resetUserFilters() {
            document.getElementById('userSearchInput').value = '';
            document.getElementById('userStatusFilter').value = 'all';
            document.getElementById('userPackageFilter').value = 'all';
            currentPage = 1;
            loadUsers();
            showNotification('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙÙ„Ø§ØªØ±', 'success');
        }

        function refreshUsers() { loadUsers(); showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', 'success'); }

â€        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ==========
        async function loadPackages() {
            let packages = [];
            if (supabaseAvailable) {
                try {
                    const result = await window.supabaseHelpers.getAllPackages();
                    if (result.success) packages = result.data;
                } catch (e) { console.log('âš ï¸ ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ù…Ù† Supabase'); }
            }
            if (!packages.length && window.sharedData) packages = await window.sharedData.getAllPackages();
            
            adminData.packages = packages;
            displayPackages(packages);
            document.getElementById('packagesCount').textContent = packages.length;
            document.getElementById('activePackages').textContent = packages.length;
        }

        function displayPackages(packages) {
            const table = document.getElementById('packagesTable');
            if (!packages.length) {
                table.innerHTML = '<tr><td colspan="9" class="loading"><i class="fas fa-box-open"></i><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ø§Ù‚Ø§Øª</p></td></tr>';
                return;
            }
            
            let html = '';
            packages.forEach(pkg => {
                const usersCount = adminData.users.filter(u => u.package?.id === pkg.id).length;
                const dailyProfit = (pkg.price * (pkg.profit_percentage || pkg.profit || 2.5) / 100).toFixed(2);
                
                html += `<tr>
                    <td><strong>${pkg.name}</strong></td>
                    <td>${pkg.price}$</td>
                    <td>${dailyProfit}$</td>
                    <td><span class="badge ${pkg.category === 'vip' ? 'warning' : pkg.category === 'premium' ? 'purple' : ''}">${pkg.category === 'vip' ? 'VIP' : pkg.category === 'premium' ? 'Ù…Ù…ÙŠØ²Ø©' : 'Ø¹Ø§Ø¯ÙŠØ©'}</span></td>
                    <td>${pkg.tasks_count || pkg.tasks || 5}</td>
                    <td>${pkg.duration || 30} ÙŠÙˆÙ…</td>
                    <td>${usersCount}</td>
                    <td><span class="status-badge status-active">Ù†Ø´Ø·</span></td>
                    <td><button class="btn btn-sm btn-danger" onclick="deletePackage(${pkg.id})"><i class="fas fa-trash"></i></button></td>
                </tr>`;
            });
            table.innerHTML = html;
        }

        async function addPackage() {
            const name = document.getElementById('packageName').value.trim();
            const price = parseFloat(document.getElementById('packagePrice').value);
            const profit = parseFloat(document.getElementById('packageProfit').value) || 2.5;
            const category = document.getElementById('packageCategory').value;
            const tasks = parseInt(document.getElementById('packageTasks').value) || 5;
            const duration = parseInt(document.getElementById('packageDuration').value) || 30;
            const description = document.getElementById('packageDescription').value.trim();
            
            if (!name || !price) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                return;
            }
            
            let success = false;
            if (supabaseAvailable) {
                try {
                    const result = await window.supabaseHelpers.addPackage({ name, price, profit, category, tasks, duration, description });
                    success = result.success;
                } catch (e) { console.log('âš ï¸ ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø§Ù‚Ø© ÙÙŠ Supabase'); }
            }
            if (!success && window.sharedData) success = !!window.sharedData.addPackage({ name, price, profit, category, tasks, duration, description });
            
            if (success) {
                showNotification(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø© "${name}"`, 'success');
                closeModal('addPackageModal');
                loadPackages();
                document.getElementById('packageName').value = '';
                document.getElementById('packagePrice').value = '';
            } else showNotification('âŒ ÙØ´Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ø§Ù‚Ø©', 'error');
        }

        function deletePackage(id) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø§Ù‚Ø©ØŸ')) return;
            let success = false;
            if (supabaseAvailable) window.supabaseHelpers.deletePackage?.(id);
            if (window.sharedData) success = window.sharedData.deletePackage(id);
            if (success) { showNotification('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨Ø§Ù‚Ø©', 'success'); loadPackages(); }
        }

â€        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… ==========
        async function loadTasks() {
            let tasks = [];
            if (supabaseAvailable) {
                try {
                    const result = await window.supabaseHelpers.getAllTasks();
                    if (result.success) tasks = result.data;
                } catch (e) { console.log('âš ï¸ ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù‡Ø§Ù… Ù…Ù† Supabase'); }
            }
            if (!tasks.length && window.sharedData) tasks = await window.sharedData.getAllTasks();
            
            adminData.tasks = tasks;
            displayTasks(tasks);
            document.getElementById('tasksCount').textContent = tasks.length;
            document.getElementById('totalTasks').textContent = tasks.length;
            document.getElementById('activeTasks').textContent = tasks.length;
        }

        function displayTasks(tasks) {
            const table = document.getElementById('tasksTable');
            if (!tasks.length) {
                table.innerHTML = '<tr><td colspan="9" class="loading"><i class="fas fa-tasks"></i><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù…</p></td></tr>';
                return;
            }
            
            let html = '';
            tasks.forEach(task => {
                const cats = task.package_categories || task.packageCategories || [];
                const categoryText = cats.map(c => c === 'vip' ? 'VIP' : c === 'premium' ? 'Ù…Ù…ÙŠØ²Ø©' : 'Ø¹Ø§Ø¯ÙŠØ©').join(', ');
                
                html += `<tr>
                    <td><strong>${task.title}</strong></td>
                    <td>${task.description}</td>
                    <td class="text-success">${task.reward}$</td>
                    <td>${task.type === 'daily' ? 'ÙŠÙˆÙ…ÙŠØ©' : 'Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©'}</td>
                    <td>${task.available_for || task.availableFor || 'Ø§Ù„ÙƒÙ„'}</td>
                    <td><small>${categoryText}</small></td>
                    <td>${task.completions || 0}</td>
                    <td><span class="status-badge status-active">Ù†Ø´Ø·</span></td>
                    <td><button class="btn btn-sm btn-danger" onclick="deleteTask(${task.id})"><i class="fas fa-trash"></i></button></td>
                </tr>`;
            });
            table.innerHTML = html;
        }

        function deleteTask(id) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ')) return;
            let success = false;
            if (window.sharedData) success = window.sharedData.deleteTask(id);
            if (success) { showNotification('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù‡Ù…Ø©', 'success'); loadTasks(); }
        }

â€        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª ==========
        function loadReferrals() {
            const users = adminData.users;
            let referrals = [], topMarketers = [];
            
            users.forEach(user => {
                if (user.referralCode) {
                    const userReferrals = users.filter(u => u.referredBy === user.referralCode);
                    if (userReferrals.length > 0) {
                        topMarketers.push({
                            user: user,
                            referralsCount: userReferrals.length,
                            activeReferrals: userReferrals.filter(u => u.package).length,
                            referralEarnings: user.referralEarnings || 0,
                            pendingCommission: userReferrals.filter(u => u.package && !u.referralRewardPaid).length * 50,
                            referralCode: user.referralCode
                        });
                    }
                }
            });
            
            topMarketers.sort((a, b) => b.referralsCount - a.referralsCount);
            adminData.topMarketers = topMarketers;
            displayTopMarketers(topMarketers);
        }

        function displayTopMarketers(marketers) {
            const table = document.getElementById('topMarketersTable');
            if (!marketers.length) {
                table.innerHTML = '<tr><td colspan="10" class="loading"><i class="fas fa-user-friends"></i><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø­Ø§Ù„Ø§Øª</p></td></tr>';
                return;
            }
            
            let html = '';
            marketers.slice(0, 20).forEach((m, i) => {
                html += `<tr>
                    <td>${i === 0 ? 'ğŸ¥‡' : i === 1 ? 'ğŸ¥ˆ' : i === 2 ? 'ğŸ¥‰' : i+1}</td>
                    <td><strong>${m.user.name}</strong><br><small>${m.user.email}</small></td>
                    <td><span class="referral-code">${m.referralCode}</span></td>
                    <td><strong>${m.referralsCount}</strong></td>
                    <td>${m.activeReferrals}</td>
                    <td>-</td>
                    <td><span class="commission-badge">${m.pendingCommission}$</span></td>
                    <td>${m.referralEarnings}$</td>
                    <td class="${m.pendingCommission > 0 ? 'text-warning' : 'text-success'}">${m.pendingCommission}$</td>
                    <td><button class="btn btn-sm btn-success" onclick="payCommission(${m.user.id})" ${m.pendingCommission === 0 ? 'disabled' : ''}><i class="fas fa-money-bill-wave"></i> ØµØ±Ù</button></td>
                </tr>`;
            });
            table.innerHTML = html;
        }

â€        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø© ==========
        async function loadPendingRequests() {
            let pending = [];
            if (supabaseAvailable) {
                try {
                    const result = await window.supabaseHelpers.getPendingPackages?.();
                    if (result?.success) pending = result.data;
                } catch (e) { console.log('âš ï¸ ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ù† Supabase'); }
            }
            if (!pending.length) pending = JSON.parse(localStorage.getItem('pending_packages')) || [];
            
            adminData.pendingPackages = pending;
            document.getElementById('pendingPackagesCount').textContent = pending.length;
            displayPendingPackages(pending);
        }

        function displayPendingPackages(pending) {
            const table = document.getElementById('pendingPackagesTable');
            if (!pending.length) {
                table.innerHTML = '<tr><td colspan="10" class="loading"><i class="fas fa-check-circle" style="color:var(--admin-success);"></i><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ø¹Ù„Ù‚Ø©</p></td></tr>';
                return;
            }
            
            let html = '';
            pending.forEach((req, i) => {
                const networkClass = req.network === 'ERC20' ? 'erc20-tag' : req.network === 'BEP20' ? 'bep20-tag' : 'trc20-tag';
                html += `<tr>
                    <td><strong>${req.user_name || req.userName || '?'}</strong><br><small>${req.user_email || ''}</small></td>
                    <td>${req.package_name || ''}</td>
                    <td><strong>${(req.amount || 0).toFixed(2)}$</strong></td>
                    <td><small style="font-family:monospace;">${req.transaction_hash ? req.transaction_hash.substring(0,10)+'...' : 'â€”'}</small></td>
                    <td><span class="network-tag ${networkClass}">${req.network || 'TRC20'}</span></td>
                    <td>${req.fast_approval ? 'âš¡ Ø³Ø±ÙŠØ¹' : 'â³ Ø¹Ø§Ø¯ÙŠ'}</td>
                    <td>${req.created_at ? new Date(req.created_at).toLocaleDateString('ar-SA') : ''}</td>
                    <td>${req.referred_by ? 'ğŸ' : 'â€”'}</td>
                    <td><span class="status-badge status-pending">Ù…Ø¹Ù„Ù‚</span></td>
                    <td><button class="btn btn-sm btn-success" onclick="showProcessModal(${i})"><i class="fas fa-cog"></i> Ù…Ø¹Ø§Ù„Ø¬Ø©</button></td>
                </tr>`;
            });
            table.innerHTML = html;
        }

        function showProcessModal(index) {
            currentRequestId = index;
            const req = adminData.pendingPackages[index];
            if (!req) return;
            
            document.getElementById('requestDetails').innerHTML = `
                <div><h4 style="color:var(--admin-warning);">${req.package_name || ''}</h4>
                <p><strong>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</strong> ${req.user_name || req.userName}<br>
                <strong>Ø§Ù„Ù…Ø¨Ù„Øº:</strong> ${(req.amount || 0).toFixed(2)}$<br>
                <strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${req.created_at ? new Date(req.created_at).toLocaleString('ar-SA') : ''}</p></div>
            `;
            document.getElementById('processRequestModal').classList.add('active');
        }

        async function approveRequest() {
            const req = adminData.pendingPackages[currentRequestId];
            if (!req) return;
            
            if (supabaseAvailable && req.id) {
                try { await window.supabaseHelpers.approvePendingPackage?.(req.id); } catch (e) {}
            }
            
            const users = JSON.parse(localStorage.getItem('elite_users')) || [];
            const userIndex = users.findIndex(u => u.id === (req.user_id || req.userId));
            if (userIndex !== -1) {
                users[userIndex].package = {
                    name: req.package_name,
                    amount: req.amount,
                    purchaseDate: new Date().toISOString(),
                    status: 'Ù†Ø´Ø·'
                };
                users[userIndex].pending_package = null;
                localStorage.setItem('elite_users', JSON.stringify(users));
            }
            
            const pending = JSON.parse(localStorage.getItem('pending_packages')) || [];
            pending.splice(currentRequestId, 1);
            localStorage.setItem('pending_packages', JSON.stringify(pending));
            
            closeModal('processRequestModal');
            await loadPendingRequests();
            await loadUsers();
            showNotification('âœ… ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚Ø©', 'success');
        }

        function rejectRequest() {
            const pending = JSON.parse(localStorage.getItem('pending_packages')) || [];
            pending.splice(currentRequestId, 1);
            localStorage.setItem('pending_packages', JSON.stringify(pending));
            closeModal('processRequestModal');
            loadPendingRequests();
            showNotification('âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨', 'info');
        }

â€        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ==========
        function loadSubscriptions() {
            const subs = adminData.users.filter(u => u.package?.status === 'Ù†Ø´Ø·').map(u => ({
                userId: u.id, userName: u.name, userEmail: u.email,
                packageName: u.package.name, packageAmount: u.package.amount,
                dailyProfit: u.package.dailyProfit || (u.package.amount * 0.025),
                startDate: u.package.purchaseDate,
                daysLeft: 30
            }));
            adminData.subscriptions = subs;
            document.getElementById('subscriptionsCount').textContent = subs.length;
            document.getElementById('activeSubscriptionsCount').textContent = subs.length;
        }

â€        // ========== ØªØ­Ù…ÙŠÙ„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø­Ø¨ ==========
        async function loadWithdrawals() {
            let withdrawals = [];
            if (supabaseAvailable) {
                try {
                    const result = await window.supabaseHelpers.getAllWithdrawals?.();
                    if (result?.success) withdrawals = result.data;
                } catch (e) {}
            }
            adminData.withdrawals = withdrawals;
            document.getElementById('withdrawalsCount').textContent = withdrawals.length;
        }

â€        // ========== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª ==========
        async function loadTransactions() {
            let transactions = [];
            if (supabaseAvailable) {
                try {
                    const result = await window.supabaseHelpers.getAllTransactions?.();
                    if (result?.success) transactions = result.data;
                } catch (e) {}
            }
            adminData.transactions = transactions;
        }

â€        // ========== ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø© ==========
        function updateRecentActivities() {
            const activities = [];
            adminData.transactions.slice(0, 10).forEach(t => {
                activities.push({ user: t.userName, action: t.description || t.type, amount: `${t.type === 'Ø³Ø­Ø¨' ? '-' : '+'}${t.amount}$`, date: t.created_at || t.date, status: t.status || 'Ù…ÙƒØªÙ…Ù„' });
            });
            
            const table = document.getElementById('recentActivities');
            if (!activities.length) {
                table.innerHTML = '<tr><td colspan="5" class="loading"><i class="fas fa-history"></i><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø´Ø§Ø·Ø§Øª</p></td></tr>';
                return;
            }
            
            let html = '';
            activities.slice(0, 10).forEach(a => {
                html += `<tr><td>${a.user || ''}</td><td>${a.action || ''}</td><td class="${a.amount?.startsWith('+') ? 'text-success' : 'text-danger'}">${a.amount || '0$'}</td><td>${a.date || ''}</td><td><span class="status-badge status-active">${a.status}</span></td></tr>`;
            });
            table.innerHTML = html;
        }

â€        // ========== ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø®Ø·Ø·Ø§Øª ==========
        function updateCharts() {
            updatePackagesChart();
            updateRevenueChart();
        }

        function updatePackagesChart() {
            const ctx = document.getElementById('packagesChartCanvas');
            if (!ctx) return;
            
            const data = {};
            adminData.packages.forEach(p => { data[p.name] = adminData.users.filter(u => u.package?.id === p.id).length; });
            
            if (packagesChart) packagesChart.destroy();
            packagesChart = new Chart(ctx, {
                type: 'pie',
                data: { labels: Object.keys(data), datasets: [{ data: Object.values(data), backgroundColor: ['#3b82f6', '#8b5cf6', '#10b981', '#f59e0b', '#ef4444'] }] },
                options: { plugins: { legend: { labels: { color: 'white' } } } }
            });
        }

        function updateRevenueChart() {
            const ctx = document.getElementById('revenueChartCanvas');
            if (!ctx) return;
            
            const revenue = {};
            for (let i = 6; i >= 0; i--) {
                const d = new Date(); d.setDate(d.getDate() - i);
                revenue[d.toLocaleDateString('ar-SA', { weekday: 'short' })] = 0;
            }
            
            adminData.transactions.forEach(t => {
                if (t.type === 'Ø§Ø´ØªØ±Ø§Ùƒ' && t.amount && t.created_at) {
                    const day = new Date(t.created_at).toLocaleDateString('ar-SA', { weekday: 'short' });
                    if (revenue.hasOwnProperty(day)) revenue[day] += t.amount;
                }
            });
            
            if (revenueChart) revenueChart.destroy();
            revenueChart = new Chart(ctx, {
                type: 'line',
                data: { labels: Object.keys(revenue), datasets: [{ label: 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª ($)', data: Object.values(revenue), borderColor: '#10b981', backgroundColor: 'rgba(16,185,129,0.1)', fill: true }] },
                options: { scales: { y: { ticks: { callback: v => v+'$', color: 'white' }, grid: { color: 'rgba(255,255,255,0.1)' } }, x: { ticks: { color: 'white' } } } }
            });
        }

â€        // ========== Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© ==========
        function updateTime() {
            document.getElementById('currentTime').textContent = new Date().toLocaleString('ar-SA');
        }

        function refreshDashboard() { loadAllData(); showNotification('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success'); }
        function refreshPending() { loadPendingRequests(); showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©', 'success'); }
        function refreshSubscriptions() { loadSubscriptions(); showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª', 'success'); }

        function showAddUserModal() { document.getElementById('addUserModal').classList.add('active'); }
        function showAddPackageModal() { document.getElementById('addPackageModal').classList.add('active'); }
        function showAddTaskModal() { document.getElementById('addTaskModal').classList.add('active'); }
        function showReferralSettings() { document.getElementById('referralSettingsModal').classList.add('active'); }

        function closeModal(id) { document.getElementById(id).classList.remove('active'); }

        function showNotification(msg, type = 'success') {
            const n = document.getElementById('notification');
            n.innerHTML = `${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'âš ï¸'} ${msg}`;
            n.className = `admin-notification ${type}`;
            n.style.display = 'flex';
            setTimeout(() => n.style.display = 'none', 3000);
        }

â€        // ========== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ==========
        document.addEventListener('DOMContentLoaded', function() {
            initAdminPanel();
            
            const saved = JSON.parse(localStorage.getItem('system_settings'));
            if (saved) {
                if (document.getElementById('minWithdrawal')) document.getElementById('minWithdrawal').value = saved.minWithdrawal || 50;
                if (document.getElementById('trc20Fee')) document.getElementById('trc20Fee').value = saved.withdrawalFees?.TRC20 || 5;
                if (document.getElementById('erc20Fee')) document.getElementById('erc20Fee').value = saved.withdrawalFees?.ERC20 || 15;
                if (document.getElementById('bep20Fee')) document.getElementById('bep20Fee').value = saved.withdrawalFees?.BEP20 || 3;
            }
            
            console.log('âœ… Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¹Ù…Ù„');
        });
    </script>
</body>
</html>
